<!DOCTYPE html>

<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Welcome!">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="apple-touch-icon-180x180.png" sizes="180x180">
	<link rel="icon" type="image/png" href="android-chrome-192x192.png" sizes="192x192">
    <title>Lunetra</title>
    <link rel="stylesheet" href="css/default.css">
    <script src="js/script.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js" type="text/javascript"></script>
</head>

<!-- やばい！　ソースを見られたらカスみたいな書き方してるのバレちゃう！！！！ -->

<body class="theme-aquamint"> <!-- テーマ（色） -->

<div class="content-container"> <!-- 上の余白 -->


<div class="page show"> <!-- 左右の余白 -->

<header style="width: 100%;">
    <table border="0" class="file-header container-nb headers" style="font-size: 120%; "> <!-- 上の検索窓っぽい装飾 -->
        <tr>
            <td class="file-header-left header"> <!-- 左上の装飾アイコンの部分 -->
                <img src="img/header-icon.png" alt="Menu" class="header-left-icon"> <!-- 左上の装飾アイコンの画像 -->
            </td>
            <td class="table-str header" id="header-title">Welcome!</td> <!-- 右上の案内メッセージ　デフォルトがhomeなのでそうしておく -->
        </tr>
    </table>
    <div class="header-image container headers"> <!-- ヘッダー画像の枠 -->
        <img src="img/header-image.png" alt="Lunetra" > <!-- ヘッダー画像 -->
    </div>
    <div class="header-adv container nonecont stripe-bg  headers" style="text-align: center; color: #9e7a5b00; user-select: none; font-size: 200%;"> <!-- ボーダー部分 -->
        welcome to Lunetra. <!-- 隠しテキスト（意味無し） -->
    </div>
    <table border="0" class="header-tab-cover container-nb  headers" style="border-bottom: none;"> <!-- タブ部分 -->
        <tr>
        <td class="header-tab header selected" data-tab="home" style="border-bottom: none;">Home</td>
        <td class="header-tab header" data-tab="original" style="border-bottom: none;">Original</td>
        <td class="header-tab header" data-tab="blog" style="border-bottom: none;">Blog</td>
        </tr>
    </table>         
    <table border="0" class="header-tab-cover container-nb  headers" id="sub-tabs"  style="display: none;"> <!-- サブタブ部分 -->
        <tr>
        <td class="header-tab selected header" data-tab="original-top">Top</td>
        <td class="header-tab header" data-tab="ss">SS</td>
        <td class="header-tab header" data-tab="Ilust">Ilust</td>
        </tr>
    </table>     
</header> <!-- ヘッダー終わり -->

<!-- Home -->
<div id="home-content" class="tab-content">
<div class="container cont-double" style=" border-top: none;">
    
    <div class="cont-str">
        <table border="0" class="scratch-table container-nb">
            <tr>
            <td class="table-str" style="text-align: left; padding-left: 1vw;">About</td>
            <td class="table-str scr" style="width: 10%; ">🔎</td>
            </tr>
        </table>      
        <div class="top" style="height: 40%;">
            <h3>Lunetra</h3>
            <p>制作者永キのほぼ全てがあるサイト。<br>
            ここを見ればだいたい分かる。</p>
        </div>
        <hr>
        <div class="bottom">
            <h3>Wakepadia - 永キ</h3>
            <p>永キ（Nagaki / Eiki）は、自ら創作を行い、成果物を食べて生きている生命体。その正体は謎に包まれている。まれに「榎キ」や「梶キマグロ」に名前を変えることがある。    …続きを見る</p>
        </div>
    </div>
    <div class="cont-img"  src="img/icon.png"><img src="img/dea.png" style="max-width: 100%;"></div>
</div> 
<div class="container" style=" border-top: none;">

    <div class="cont-str-main">
        <table border="0" class="scratch-table container-nb" style="width: 50%;">
            <tr>
            <td class="table-str" style="text-align: left; padding-left: 1vw;">News</td>
            <td class="table-str scr" style="width: 10%; ">🔎</td>
            </tr>
        </table>      
        <div class="top">
            <h3>Lunetra、ver2　25/7/1</h3>
            <p>サイトの見た目を大幅改良。</a></p>
        <hr>
        <div class="bottom">
            <h3>Lunetra、開放　25/5/7</h3>
            <p>ノリと勢いでサイトを制作！！！</p>
        </div>
        <hr>
        <div class="bottom">
            <h3>あの"有名人"が突然のVTuberデビュー　-VNews　25/5/6</h3>
            <p>記事を作成。<a style="color:var(--color-text);" href="blog/vtube.html">コチラ</a></p>
        </div>
    </div>
</div> 
</div>
<div class="container" style=" border-top: none;">
    <div class="cont-str-main">
        <table border="0" class="scratch-table container-nb" style="width: 50%;">
            <tr>
            <td class="table-str" style="text-align: left; padding-left: 1vw;">Q&A</td>
            <td class="table-str scr" style="width: 10%; ">🔎</td>
            </tr>
        </table>      
            <div class="top">
                <p><br>Q&A　コーナー　ぱふぱふ</p>
            </div> 
        <hr>
            <div class="top">
                <h3>Q1.フォント見づらい 目痛い</h3>
                <p>A.イラストの雰囲気を尊重したほうが良いかなという意図。<br>
                    苦情が多かったら変えられるようにしたいなと思っている。</p>
            </div>
        <hr>
            <div class="bottom">
                <h3>Q2.SNSとかのリンクは</h3>
                <p>A.やってない。</p>
            </div>

    </div>
</div>

<div class="container" style=" border-top: none;">
    <div class="cont-str-main">
        <table border="0" class="scratch-table container-nb" style="width: 50%;">
            <tr>
            <td class="table-str" style="text-align: left; padding-left: 1vw;">
                Thanks
            </td>
            <td class="table-str scr" style="width: 10%; ">
                📜
            </td>
            </tr>
        </table>      
            <div class="top">
                <h3>クレジット</h3>
                <p>このサイトを作る上でお借りした素材。敬称略。</p>
            </div> 
        <hr>
            <div class="bottom">
                <h4>フォント素材</h4>
                <p> チェックポイント．（ピリオド）　　マルセ<br>
                    サイトURL（<a href="https://yokutobanaitori.web.fc2.com/" target="_blank">https://yokutobanaitori.web.fc2.com/</a>）</p>
                <p> KHドットフォント　　自家製フォント工房<br>
                    サイトURL（<a href="http://jikasei.me/font/kh-dotfont/" target="_blank">http://jikasei.me/font/kh-dotfont/</a>）<br>
                    icensed under SIL Open Font License 1.1 (http://scripts.sil.org/OFL)<br>
                    © Keitarou Hiraki, Font Silo 1990-2015.</p>
                <h4>他</h4>
                <p> ・サイトのデザインをパク参考にさせていただいた動画<br>
                    （ここにURL）
                </p>
            </div>

    </div>
</div>
</div> <!-- Home 閉じ -->

<!-- Original Top -->
<div id="original-top-content" class="tab-content"  style="display: none;">
    <div class="container" style=" border-top: none;  text-align: center; justify-content: center;">
        <div class="cont-str-main"><div class="top">
            <h3>◆ あてんしょん ◆</h3>
            <p> ここから先に書いてあることは全部フィクションで、<br>
                実際の人物・団体・事件などには<br>
                一切関係ありません。</p>
        </div></div>
        
            <img src="img/yubisasi.png" class="corner-image" style="user-select: none;">
    </div>

    <div class="container" style=" border-top: none;">
        <div class="cont-str-main">
            <table border="0" class="scratch-table container-nb" style="width: 50%;">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">Explainist</td>
                <td class="table-str scr" style="width: 10%; ">🏳️</td>
                </tr>
            </table>      
            <div class="top">
                <h3>エクスプレイニスト</h3>
                <p> ある程度の摂理設定だけ同じな別の世界×４。総じて命は軽いが言うほど暗くない（多分）。</p>
            </div>
        </div>

    </div> 
    <div class="container cont-double" style=" border-top: none;">
        
        <div class="cont-str">
            <table border="0" class="scratch-table container-nb">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">Seed</td>
                <td class="table-str scr" style="width: 10%; ">🔎</td>
                </tr>
            </table>      
            <div class="top">
                <a href="seed/home.html" style="position: relative; z-index: 10; text-decoration: none; color: var(--color-text);">
                <h3>凍氷都市シード</h3></a>
                <p> 現代日本モチーフ、４つの中でもファンタジー色が弱くかなり異色。<br>
                    首都の凍氷都に１つだけのゲートを中心に、
                    殺人が数日間にわたり報道される治安最高の「表」と、
                    暴力マシマシ平均治安深夜LA未満の「裏」に分かれている国。設定変更により氷要素はない。</p>
            </div>
            <hr>
            <div class="bottom">
                <p> "あなたに生を望む資格があるか、試してみようじゃありませんか。"</p>
            </div>
        </div>
        <div class="cont-maximg"  style="background-color: rgb(24, 26, 21);" onclick="location.href='seed/home.html'"><a href="seed/home.html"><img src="img/seed.png" class="fitted-image"></a></div>

    </div>
</div> <!-- Original Top 閉じ -->

<!-- SS -->
<div id="ss-content" class="tab-content" style="display: none;">
    <div class="container" style=" border-top: none;  text-align: center; justify-content: center;">
        <div class="cont-str-main" style="text-align: left;"><div class="top">
            <h3>◆ いんとろだくしょん ◆</h3>
            <p> SS・小説置き場。<br>
                完結しているものがほとんどない。</p>
        </div></div>
        
    </div>

    <div class="container" style=" border-top: none;">
        <div class="cont-str-main">
            <table border="0" class="scratch-table container-nb" style="width: 50%;">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">Independence Story</td>
                <td class="table-str scr" style="width: 10%; ">🔎</td>
                </tr>
            </table>      
            <div class="top">
                <h3>独立小説</h3>
                <p>事前知識のいらない独立した小説。</p>
            </div>
        </div>
    </div> 

    <div class="container cont-double" style=" border-top: none;">
        
        <div class="cont-str">
            <table border="0" class="scratch-table container-nb">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">Black Swan</td>
                <td class="table-str scr" style="width: 10%; ">☕</td>
                </tr>
            </table>      
            <div class="top">
                <a href="SS/blackswan.html" style="position: relative; z-index: 10; text-decoration: none; color: var(--color-text);">
                <h3>黒い白鳥と白い烏</h3></a>
                <p> 気が向いたら更新。<br>
                現代日本、息抜きに書いた男×男。ちょっとだけ暗い。<br>
            <a href="SS/blackswan.html">読む</a></p>
            </div>
            <hr>
            <div class="bottom">
                <p> 話数：1話<br>
                    1話平均：3500字程度<br>
                    全体長さ：3500字程度</p>
            </div>
        </div>
        <div class="cont-maximg"  style="background-color: rgba(255, 255, 255, 0);" ><img src="img/blackswan_1.png" class="fitted-image"></div>

    </div>
    <div class="container cont-double" style=" border-top: none;">
        <div class="cont-str">
            <table border="0" class="scratch-table container-nb">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">MARRIED</td>
                <td class="table-str scr" style="width: 10%; ">🌕️</td>
                </tr>
            </table>      
            <div class="top">
                <a href="SS/kisakike.html" style="position: relative; z-index: 10; text-decoration: none; color: var(--color-text);">
                <h3>結婚詐欺師脅迫して結婚迫ってみた</h3></a>
                <p> ネタ引っ張り出して深夜に布団の中で書いた。<br>
                    満足いってない。<br>
            <a href="SS/kesakike.html">読む</a></p>
            </div>
            <hr>
            <div class="bottom">
                <p> 話数：1話<br>
                    1話平均：1000字程度<br>
                    全体長さ：1000字程度</p>
            </div>
        </div>
        <div class="cont-maximg"  style="background-color: rgb(13, 0, 36);" ><img src="img/kesakike.png" class="fitted-image"></div>

    </div>




</div> <!-- SS 閉じ -->

<!-- Ilust -->
<div id="Ilust-content" class="tab-content" style="display: none;">
    <div class="container" style=" border-top: none;  text-align: center; justify-content: center;">
        <div class="cont-str-main" style="text-align: left;">
            <div class="top">
                <h3>◆ いんとろだくしょん ◆</h3>
                <p> イラスト置き場。<br>
                    落書き１０割。</p>
            </div>
        </div>
    </div>

    <div class="container" style=" border-top: none;">
        <div class="cont-str-main">
            <table border="0" class="scratch-table container-nb" style="width: 50%;">
                <tr>
                <td class="table-str" style="text-align: left; padding-left: 1vw;">RAKUGUKI</td>
                <td class="table-str scr" style="width: 10%; ">✒️</td>
                </tr>
            </table>      
            <div class="top">
                <h3>落書き</h3>
                <p>らくがき。</p>
            </div>
        </div>
    </div> 

    <div class="container" style=" border-top: none;">
            <div class="bottom gallery">
                <a href="img/gallery/rakugaki1.png" data-lightbox="R1" data-title="俺の夢は終わらねぇ！　2024~2025">
                    <img src="img/gallery/rakugaki1.png" alt="" class="gallery-img">
                </a>
                <a href="img/gallery/rakugaki3.png" data-lightbox="R1" data-title="しかばねありさ　2024~2025">
                    <img src="img/gallery/rakugaki3.png" alt="" class="gallery-img">
                </a>
                <a href="img/gallery/moke.png" data-lightbox="R1" data-title="没スチル　朝霧　2025/6">
                    <img src="img/gallery/moke.png" alt="" class="gallery-img">
                </a>
                <a href="img/gallery/mikan.png" data-lightbox="R1" data-title="2025/5">
                    <img src="img/gallery/mikan.png" alt="" class="gallery-img">
                </a>
            </div>
    </div> 


</div> <!-- Ilust 閉じ -->


<!-- Game -->
<div id="game-content" class="tab-content" style="display: none;">
    <div class="container" style=" border-top: none;  text-align: center; justify-content: center;">
        <div class="cont-str-main" style="text-align: left;">
            <div class="top">
                <h3>Coming Soon…</h3>
                <p>Coming Soon…</p>
            </div>
        </div>
    </div>
</div> <!-- Game 閉じ -->

<!-- Other -->
<div id="other-content" class="tab-content" style="display: none;">
    <div class="container" style=" border-top: none;  text-align: center; justify-content: center;">
        <div class="cont-str-main" style="text-align: left;">
            <div class="top">
                <h3>まだなんもないよ</h3>
                <p>多分あんまり使わないよ</p>
            </div>
        </div>
    </div>
</div> <!-- Other 閉じ -->



<!-- Blog -->
<div id="blog-content" class="tab-content">



<!-- 検索・フィルター部分 -->
<div class="container" style="border-top: none;">
    <div class="cont-str-main">
        <div class="top">
            <div class="search-container" style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                <input type="text" id="searchInput" placeholder="記事を検索..." 
                       style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid var(--color-border); background-color: var(--color-background2); color: var(--color-text); font-family: semi;">
                <select id="sortSelect" style="padding: 8px; border: 1px solid var(--color-border); background-color: var(--color-background2); color: var(--color-text); font-family: semi;">
                    <option value="newest">新しい順</option>
                    <option value="oldest">古い順</option>
                </select>
            </div>
            <div class="tag-filter" id="tagFilter" style="display: flex; gap: 5px; flex-wrap: wrap;">
                <!-- タグフィルターはJSで動的生成 -->
            </div>
        </div>
    </div>
</div>

<!-- 記事一覧 -->
<div id="articleList">
    <!-- 記事はJSで動的生成 -->
</div>

<!-- 記事詳細モーダル -->
<div id="articleModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <span class="close" id="closeModal">&times;</span>
            <h2 id="modalTitle"></h2>
            <div class="modal-meta">
                <span id="modalDate"></span>
                <span id="modalCategory"></span>
            </div>
        </div>
        <div class="modal-body">
            <div id="modalContent"></div>
            <div class="modal-tags" id="modalTags"></div>
        </div>
    </div>
</div>

<!-- ページネーション -->
<div class="container" style="border-top: none;">
    <div class="cont-str-main" style="text-align: center;">
        <div id="pagination">
            <!-- ページネーションはJSで動的生成 -->
        </div>
    </div>
</div>

</div> <!-- Blog 閉じ -->




<!-- フォントサイズ変更のhtml -->

<div class="font-size-toggle" id="fontSizeToggle">
    A
</div>

<div class="font-size-menu" id="fontSizeMenu">
    <h4>文字サイズ</h4>
    <div class="font-size-options">
        <div class="font-size-option" data-size="small">小</div>
        <div class="font-size-option active" data-size="medium">中</div>
        <div class="font-size-option" data-size="large">大</div>
    </div>
</div>

<!-- フォントサイズ変更のhtml終わり -->



</div> <!-- page show 閉じ -->

<script>
// タブ管理システム（改良版）
class TabManager {
    constructor() {
        this.currentMainTab = 'home';
        this.currentSubTab = 'original-top';
        this.headerTitles = {
            'home': 'Welcome!',
            'blog': '- Hazukashigariya no Hitorigoto -',
            'original': '- Original Top -',
            'ss': '- Short Story Storage -',
            'game': '- Games -',
            'other': '- Other Contents -',
            'Ilust': '- Ilustrations -'
        };
        
        // ヘッダー画像のパス
        this.headerImages = {
            'home': 'img/header/home.png',
            'blog': 'img/header/flower.png',
            'original': 'img/header/seed.png',
            'ss': 'img/header/kesakike.png',
            'game': 'img/header/seed.png',
            'other': 'img/header/seed.png',
            'Ilust': 'img/header/flower1.png'
        };
        // バックグラウンド画像のパス
        this.backGrounds = {
            'home': 'img/background/sky.png',
            'blog': 'img/background/flower.png',
            'original': 'img/background/seed.png',
            'ss': 'img/kesakike.png',
            'other': 'img/background/blue.png',
            'game': 'img/background/blue.png',
            'Ilust': 'img/background/flower1.png'
        };
        // テーマ
        this.pageThemes = {
            'home': 'theme-aquamint',
            'blog': 'theme-floral',
            'original': 'theme-lightmono',
            'ss': 'theme-moonlit',
            'game': 'theme-lightmono',
            'other': 'theme-lightmono',
            'Ilust': 'theme-normal'
        };
        
        this.init();
    }

    init() {
        // URLハッシュからタブ情報を読み込み
        this.loadTabFromHash();
        
        // メインタブのクリックイベント
        document.querySelectorAll('.header-tab[data-tab="home"], .header-tab[data-tab="blog"], .header-tab[data-tab="original"]').forEach(tab => {
            tab.addEventListener('click', (e) => {
                const tabName = e.target.dataset.tab;
                this.switchMainTab(tabName);
            });
        });

        // サブタブのクリックイベント
        document.querySelectorAll('.header-tab[data-tab="original-top"], .header-tab[data-tab="ss"], .header-tab[data-tab="game"], .header-tab[data-tab="other"], .header-tab[data-tab="Ilust"]').forEach(tab => {
            tab.addEventListener('click', (e) => {
                const tabName = e.target.dataset.tab;
                this.switchSubTab(tabName);
            });
        });

        // ブラウザの戻る/進むボタンに対応
        window.addEventListener('popstate', (e) => {
            this.loadTabFromHash();
            this.updateDisplay();
        });

        // 初期表示
        this.updateDisplay();
    }

    // URLハッシュからタブ情報を読み込み
    loadTabFromHash() {
        const hash = window.location.hash.substring(1); // '#'を除去
        
        if (!hash) {
            // ハッシュがない場合はデフォルト
            this.currentMainTab = 'home';
            this.currentSubTab = 'original-top';
            return;
        }

        // ハッシュの解析
        const validSubTabs = ['original-top', 'ss', 'game', 'other', 'Ilust'];
        const validMainTabs = ['home', 'blog', 'original'];

        if (validSubTabs.includes(hash)) {
            // サブタブが指定された場合
            this.currentMainTab = 'original';
            this.currentSubTab = hash;
        } else if (validMainTabs.includes(hash)) {
            // メインタブが指定された場合
            this.currentMainTab = hash;
            if (hash === 'original') {
                this.currentSubTab = 'original-top';
            }
        } else {
            // 不正なハッシュの場合はデフォルト
            this.currentMainTab = 'home';
            this.currentSubTab = 'original-top';
        }
    }

    // URLハッシュを更新
    updateHash() {
        let hash = '';
        
        if (this.currentMainTab === 'home') {
            hash = 'home';
        } else if (this.currentMainTab === 'blog') {
            hash = 'blog';
        } else if (this.currentMainTab === 'original') {
            hash = this.currentSubTab;
        }
        
        // ハッシュを更新（履歴に追加）
        if (window.location.hash !== '#' + hash) {
            window.location.hash = hash;
        }
    }

    switchMainTab(tabName) {
        this.currentMainTab = tabName;
        
        // Homeタブの場合はサブタブを隠す
        if (tabName === 'home' || tabName === 'blog') {
            document.getElementById('sub-tabs').style.display = 'none';
        } else {
            document.getElementById('sub-tabs').style.display = 'table';
            // Originalタブに戻った時はOriginal-Topを表示
            if (tabName === 'original') {
                this.currentSubTab = 'original-top';
            }
        }
        
        this.updateHash();
        this.updateDisplay();
    }

    switchSubTab(tabName) {
        this.currentSubTab = tabName;
        this.currentMainTab = 'original'; // サブタブが選択されたらメインタブはOriginalに
        this.updateHash();
        this.updateDisplay();
    }

    updateDisplay() {
        // ヘッダータイトルの更新
        const headerTitle = document.getElementById('header-title');
        if (this.currentMainTab === 'home') {
            headerTitle.textContent = this.headerTitles['home'];
        } else if (this.currentMainTab === 'blog') {
            headerTitle.textContent = this.headerTitles['blog'];
        } else {
            // サブタブに応じてタイトルを変更
            switch (this.currentSubTab) {
                case 'ss':
                    headerTitle.textContent = this.headerTitles['ss'];
                    break;
                case 'game':
                    headerTitle.textContent = this.headerTitles['game'];
                    break;
                case 'Ilust':
                    headerTitle.textContent = this.headerTitles['Ilust'];
                    break;
                case 'other':
                    headerTitle.textContent = this.headerTitles['other'];
                    break;
                default:
                    headerTitle.textContent = this.headerTitles['original'];
            }
        }

        // ヘッダー画像の更新
        this.updateHeaderImage();

        // メインタブの選択状態更新
        document.querySelectorAll('.header-tab[data-tab="home"], .header-tab[data-tab="blog"], .header-tab[data-tab="original"]').forEach(tab => {
            tab.classList.remove('selected');
            if (tab.dataset.tab === this.currentMainTab) {
                tab.classList.add('selected');
            }
        });

        // サブタブの選択状態更新
        document.querySelectorAll('.header-tab[data-tab="original-top"], .header-tab[data-tab="ss"], .header-tab[data-tab="game"], .header-tab[data-tab="other"], .header-tab[data-tab="Ilust"]').forEach(tab => {
            tab.classList.remove('selected');
            if (tab.dataset.tab === this.currentSubTab) {
                tab.classList.add('selected');
            }
        });

        // サブタブの表示/非表示
        if (this.currentMainTab === 'original') {
            document.getElementById('sub-tabs').style.display = 'table';
        } else {
            document.getElementById('sub-tabs').style.display = 'none';
        }

        // コンテンツの表示/非表示
        this.updateContent();
    }

    updateHeaderImage() { //どう考えてもヘッダー以外も変えてる
        const headerImage = document.querySelector('.header-image img'); //ヘッダー画像要素取得
        const themeBody = document.querySelector('body'); //body取得(背景画像もテーマもこれ) themeBodyってなに？　styleも変えてるよね？
        if (!headerImage) return;

        let imagePath;
        let backPath;
        let themeClass;
        
        if (this.currentMainTab === 'home') {
            imagePath = this.headerImages['home'];
            backPath = this.backGrounds['home'];
            themeClass = this.pageThemes['home'];
        } else if (this.currentMainTab === 'blog') {
            imagePath = this.headerImages['blog'];
            backPath = this.backGrounds['blog'];
            themeClass = this.pageThemes['blog'];
        } else {
            // サブタブに応じて画像を変更
            switch (this.currentSubTab) {
                case 'ss':
                    imagePath = this.headerImages['ss'];
                    themeClass = this.pageThemes['ss'];
                    backPath = this.backGrounds['ss'];
                    break;
                case 'game':
                    imagePath = this.headerImages['game'];
                    themeClass = this.pageThemes['game'];
                    backPath = this.backGrounds['game'];
                    break;
                case 'Ilust':
                    imagePath = this.headerImages['Ilust']; //よく見たらこれだけ大文字　置換の影響やな？
                    themeClass = this.pageThemes['Ilust'];
                    backPath = this.backGrounds['Ilust'];
                    break;
                case 'other':
                    imagePath = this.headerImages['other'];
                    themeClass = this.pageThemes['other'];
                    backPath = this.backGrounds['other'];
                    break;
                default:
                    imagePath = this.headerImages['original'];
                    themeClass = this.pageThemes['original'];
                    backPath = this.backGrounds['original'];
            }
        }

        
        headerImage.src = imagePath;
        themeBody.style.backgroundImage = `url("${backPath}")`;
        // テーマクラス削除
        themeBody.classList.remove('theme-aquamint', 'theme-normal', 'theme-mono', 'theme-floral', 'theme-moonlit','theme-lightmono');
        // テーマクラス追加
        themeBody.classList.add(themeClass);

        

    }

    updateContent() {
        // すべてのコンテンツを隠す
        document.querySelectorAll('.tab-content').forEach(content => {
            content.style.display = 'none';
        });

        // 現在のタブに応じてコンテンツを表示
        let contentId;
        if (this.currentMainTab === 'home') {
            contentId = 'home-content';
        } else if (this.currentMainTab === 'blog') {
            contentId = 'blog-content';
        } else {
            switch (this.currentSubTab) {
                case 'ss':
                    contentId = 'ss-content';
                    break;
                case 'game':
                    contentId = 'game-content';
                    break;
                case 'Ilust':
                    contentId = 'Ilust-content';
                    break;
                case 'other':
                    contentId = 'other-content';
                    break;
                default:
                    contentId = 'original-top-content';
            }
        }

        const targetContent = document.getElementById(contentId);
        if (targetContent) {
            targetContent.style.display = 'block';
        }
    }

    // 外部からタブを指定して開くためのメソッド
    openTab(tabName) {
        const validSubTabs = ['original-top', 'ss', 'game', 'other', 'Ilust'];
        const validMainTabs = ['home', 'blog', 'original'];

        if (validSubTabs.includes(tabName)) {
            this.switchSubTab(tabName);
        } else if (validMainTabs.includes(tabName)) {
            this.switchMainTab(tabName);
        }
    }
}
// フォントサイズ変更機能
class FontSizeController {
    constructor() {
        this.toggle = document.getElementById('fontSizeToggle');
        this.menu = document.getElementById('fontSizeMenu');
        this.options = document.querySelectorAll('.font-size-option');
        this.currentSize = 'medium';
        
        this.init();
    }

    init() {
        // トグルボタンのクリックイベント
        this.toggle.addEventListener('click', (e) => {
            e.stopPropagation();
            this.toggleMenu();
        });

        // メニュー外クリックで閉じる
        document.addEventListener('click', (e) => {
            if (!this.menu.contains(e.target) && !this.toggle.contains(e.target)) {
                this.closeMenu();
            }
        });

        // フォントサイズオプションのクリックイベント
        this.options.forEach(option => {
            option.addEventListener('click', (e) => {
                const size = e.target.dataset.size;
                this.changeFontSize(size);
                this.closeMenu();
            });
        });

        // 保存されたフォントサイズを復元
        this.loadSavedFontSize();
    }

    toggleMenu() {
        this.menu.classList.toggle('show');
    }

    closeMenu() {
        this.menu.classList.remove('show');
    }

    changeFontSize(size) {
        // 既存のフォントサイズクラスを削除
        document.body.classList.remove('font-small', 'font-medium', 'font-large');
        
        // 新しいフォントサイズクラスを追加
        document.body.classList.add(`font-${size}`);
        
        // アクティブな選択肢を更新
        this.options.forEach(option => {
            option.classList.remove('active');
            if (option.dataset.size === size) {
                option.classList.add('active');
            }
        });

        // 現在のサイズを保存
        this.currentSize = size;
        this.saveFontSize(size);

        // トグルボタンのアイコンを更新
        this.updateToggleIcon(size);
    }

    updateToggleIcon(size) {
        const icons = {
            small: 'A',
            medium: 'A',
            large: 'A'
        };
        this.toggle.textContent = icons[size];
        
        // サイズに応じてアイコンのスタイルも変更
        const iconSizes = {
            small: '16px',
            medium: '20px',
            large: '24px'
        };
        this.toggle.style.fontSize = iconSizes[size];
    }

    saveFontSize(size) {
        // メモリに保存（localStorage使用不可のため）
        window.currentFontSize = size;
    }

    loadSavedFontSize() {
        // メモリから復元
        const savedSize = window.currentFontSize || 'medium';
        this.changeFontSize(savedSize);
    }
}
// ブログ機能のJavaScript（改良版）
class BlogManager {
    constructor() {
        this.articles = [
            {
                id: 1,
                title: "Vtuberさばるちゃん爆誕",
                filename: "vtube.html",
                date: "2025-05-06",
                genre: "なんか作った",
                tags: ["Vtuberさばるちゃん"],
                summary: "Live2Dでいろいろやって配信準備までした。昔の記事の残骸（サンプル）なので中身なし。"
            },
            {
                id: 2,
                title: "Lunetra Ver2",
                filename: "lune_ver2.html",
                date: "2025-07-02",
                genre: "サイト更新",
                tags: ["更新情報","お知らせ"],
                summary: "サイトををGitHubに移行したり大幅にリニューアルしたり。"
            }
        ];
        
        this.currentPage = 1;
        this.articlesPerPage = 5;
        this.currentGenre = 'all';
        this.selectedTags = [];
        this.currentSort = 'newest';
        this.searchQuery = '';
        this.filteredArticles = [...this.articles];
        
        this.init();
    }

    init() {
        // 検索機能
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                this.searchQuery = e.target.value.toLowerCase();
                this.filterAndSort();
            });
        }

        // ソート機能
        const sortSelect = document.getElementById('sortSelect');
        if (sortSelect) {
            sortSelect.addEventListener('change', (e) => {
                this.currentSort = e.target.value;
                this.filterAndSort();
            });
        }

        // 初期表示
        this.generateFilters();
        this.filterAndSort();
    }

    generateFilters() {
        const tagFilter = document.getElementById('tagFilter');
        if (!tagFilter) return;

        // 全ジャンルを収集
        const allGenres = [...new Set(this.articles.map(article => article.genre))];
        
        // 全タグを収集
        const allTags = [...new Set(this.articles.flatMap(article => article.tags))];
        
        // フィルターコンテナを作成
        tagFilter.innerHTML = '';
        
        // ジャンルフィルター
        const genreContainer = document.createElement('div');
        genreContainer.style.marginBottom = '15px';
        
        const genreLabel = document.createElement('div');
        genreLabel.textContent = 'ジャンル:';
        genreLabel.style.cssText = `
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--color-text);
            font-family: semi;
        `;
        genreContainer.appendChild(genreLabel);
        
        const genreButtons = document.createElement('div');
        genreButtons.style.cssText = 'display: flex; gap: 5px; flex-wrap: wrap;';
        
        // 「すべて」ボタン
        const allGenreButton = this.createFilterButton('すべて', true);
        allGenreButton.addEventListener('click', () => {
            this.setGenreFilter('all');
        });
        genreButtons.appendChild(allGenreButton);
        
        // 各ジャンルのボタン
        allGenres.forEach(genre => {
            const button = this.createFilterButton(genre, false);
            button.addEventListener('click', () => {
                this.setGenreFilter(genre);
            });
            genreButtons.appendChild(button);
        });
        
        genreContainer.appendChild(genreButtons);
        tagFilter.appendChild(genreContainer);
        
        // タグフィルター
        const tagContainer = document.createElement('div');
        
        const tagLabel = document.createElement('div');
        tagLabel.textContent = 'タグ（複数選択可）:';
        tagLabel.style.cssText = `
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--color-text);
            font-family: semi;
        `;
        tagContainer.appendChild(tagLabel);
        
        const tagButtons = document.createElement('div');
        tagButtons.style.cssText = 'display: flex; gap: 5px; flex-wrap: wrap;';
        
        // 各タグのボタン
        allTags.forEach(tag => {
            const button = this.createFilterButton(tag, false);
            button.addEventListener('click', () => {
                this.toggleTagFilter(tag, button);
            });
            tagButtons.appendChild(button);
        });
        
        tagContainer.appendChild(tagButtons);
        tagFilter.appendChild(tagContainer);
        
        // 選択中のタグ表示エリア
        const selectedTagsContainer = document.createElement('div');
        selectedTagsContainer.id = 'selectedTags';
        selectedTagsContainer.style.cssText = 'margin-top: 10px;';
        tagFilter.appendChild(selectedTagsContainer);
    }

    createFilterButton(text, isActive) {
        const button = document.createElement('button');
        button.textContent = text;
        button.className = isActive ? 'filter-button active' : 'filter-button';
        button.style.cssText = `
            padding: 6px 12px;
            margin: 2px;
            border: 1px solid var(--color-border);
            background-color: ${isActive ? 'var(--color-primary)' : 'var(--color-background2)'};
            color: ${isActive ? 'white' : 'var(--color-text)'};
            cursor: pointer;
            border-radius: 4px;
            font-family: semi;
            font-size: 13px;
            transition: all 0.2s;
        `;
        
        button.addEventListener('mouseenter', () => {
            if (!button.classList.contains('active')) {
                button.style.backgroundColor = 'var(--color-tabhover)';
                button.style.color = 'white';
            }
        });
        
        button.addEventListener('mouseleave', () => {
            if (!button.classList.contains('active')) {
                button.style.backgroundColor = 'var(--color-background2)';
                button.style.color = 'var(--color-text)';
            }
        });
        
        return button;
    }

    setGenreFilter(genre) {
        this.currentGenre = genre;
        this.currentPage = 1;
        
        // ジャンルボタンの見た目を更新
        const genreButtons = document.querySelectorAll('.filter-button');
        genreButtons.forEach(button => {
            const isGenreButton = button.textContent === 'すべて' || 
                this.articles.some(article => article.genre === button.textContent);
            
            if (isGenreButton) {
                const isActive = (genre === 'all' && button.textContent === 'すべて') || 
                    (genre !== 'all' && button.textContent === genre);
                
                button.classList.toggle('active', isActive);
                button.style.backgroundColor = isActive ? 'var(--color-primary)' : 'var(--color-background2)';
                button.style.color = isActive ? 'white' : 'var(--color-text)';
            }
        });
        
        this.filterAndSort();
    }

    toggleTagFilter(tag, button) {
        const index = this.selectedTags.indexOf(tag);
        if (index > -1) {
            this.selectedTags.splice(index, 1);
            button.classList.remove('active');
            button.style.backgroundColor = 'var(--color-background2)';
            button.style.color = 'var(--color-text)';
        } else {
            this.selectedTags.push(tag);
            button.classList.add('active');
            button.style.backgroundColor = 'var(--color-primary)';
            button.style.color = 'white';
        }
        
        this.currentPage = 1;
        this.updateSelectedTagsDisplay();
        this.filterAndSort();
    }

    updateSelectedTagsDisplay() {
        const selectedTagsContainer = document.getElementById('selectedTags');
        if (!selectedTagsContainer) return;
        
        if (this.selectedTags.length === 0) {
            selectedTagsContainer.innerHTML = '';
            return;
        }
        
        selectedTagsContainer.innerHTML = `
            <div style="font-size: 12px; color: var(--color-text); margin-bottom: 5px;">
                選択中のタグ: ${this.selectedTags.join(', ')}
                <button onclick="blogManager.clearTags()" style="
                    margin-left: 10px;
                    padding: 2px 6px;
                    font-size: 11px;
                    background-color: var(--color-secondary);
                    color: var(--color-text);
                    border: 1px solid var(--color-border);
                    border-radius: 3px;
                    cursor: pointer;
                    font-family: main;
                ">クリア</button>
            </div>
        `;
    }

    clearTags() {
        this.selectedTags = [];
        
        // タグボタンの見た目をリセット
        const tagButtons = document.querySelectorAll('.filter-button');
        tagButtons.forEach(button => {
            const isTagButton = !button.textContent.includes('すべて') && 
                !this.articles.some(article => article.genre === button.textContent);
            
            if (isTagButton) {
                button.classList.remove('active');
                button.style.backgroundColor = 'var(--color-background2)';
                button.style.color = 'var(--color-text)';
            }
        });
        
        this.updateSelectedTagsDisplay();
        this.filterAndSort();
    }

    filterAndSort() {
        // フィルタリング
        this.filteredArticles = this.articles.filter(article => {
            const matchesSearch = this.searchQuery === '' || 
                article.title.toLowerCase().includes(this.searchQuery) ||
                article.summary.toLowerCase().includes(this.searchQuery);
            
            const matchesGenre = this.currentGenre === 'all' || 
                article.genre === this.currentGenre;
            
            const matchesTags = this.selectedTags.length === 0 || 
                this.selectedTags.every(tag => article.tags.includes(tag));
            
            return matchesSearch && matchesGenre && matchesTags;
        });

        // ソート
        this.filteredArticles.sort((a, b) => {
            if (this.currentSort === 'newest') {
                return new Date(b.date) - new Date(a.date);
            } else {
                return new Date(a.date) - new Date(b.date);
            }
        });

        this.renderArticles();
        this.renderPagination();
    }

    renderArticles() {
        const articleList = document.getElementById('articleList');
        if (!articleList) return;

        articleList.innerHTML = '';

        const startIndex = (this.currentPage - 1) * this.articlesPerPage;
        const endIndex = startIndex + this.articlesPerPage;
        const pageArticles = this.filteredArticles.slice(startIndex, endIndex);

        if (pageArticles.length === 0) {
            articleList.innerHTML = `
                <div class="container" style="border-top: none;">
                    <div class="cont-str-main" style="text-align: center;">
                        <p>該当する記事が見つかりませんでした。</p>
                    </div>
                </div>
            `;
            return;
        }

        pageArticles.forEach(article => {
            const articleElement = document.createElement('div');
            articleElement.className = 'container';
            articleElement.style.cssText = 'border-top: none;';
            
            articleElement.innerHTML = `
                <div class="cont-str-main">
                    <h4 style="
                        margin: 0 0 10px 0;
                        padding: 0;
                        color: var(--color-text);
                        font-family: semi;
                        cursor: pointer;
                        transition: color 0.2s;
                    " class="article-title" data-filename="${article.filename}">
                        ${article.title}
                    </h4>
                    <div style="
                        font-size: 13px;
                        color: var(--color-lighttext);
                        margin-bottom: 10px;
                        display: flex;
                        align-items: center;
                        gap: 15px;
                    ">
                        <span>${article.date}</span>
                        <span style="
                            background-color: var(--color-primary);
                            color: white;
                            padding: 2px 8px;
                            border-radius: 3px;
                            font-size: 12px;
                        ">${article.genre}</span>
                    </div>
                    <p style="
                        margin: 0 0 10px 0;
                        line-height: 1.6;
                        color: var(--color-text);
                    ">${article.summary}</p>
                    <div style="margin-top: 10px;">
                        ${article.tags.map(tag => `
                            <span style="
                                background-color: var(--color-background2);
                                color: var(--color-text);
                                padding: 2px 6px;
                                border-radius: 3px;
                                font-size: 11px;
                                margin-right: 5px;
                                border: 1px solid var(--color-border);
                            ">${tag}</span>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // 記事タイトルのクリックイベント
            const titleElement = articleElement.querySelector('.article-title');
            titleElement.addEventListener('click', () => {
                window.open(`blog/${article.filename}`, '_self');
            });
            
            titleElement.addEventListener('mouseenter', () => {
                titleElement.style.color = 'var(--color-primary)';
            });
            
            titleElement.addEventListener('mouseleave', () => {
                titleElement.style.color = 'var(--color-text)';
            });
            
            articleList.appendChild(articleElement);
        });
    }

    renderPagination() {
        const pagination = document.getElementById('pagination');
        if (!pagination) return;

        const totalPages = Math.ceil(this.filteredArticles.length / this.articlesPerPage);
        
        if (totalPages <= 1) {
            pagination.innerHTML = '';
            return;
        }

        let paginationHTML = '';
        
        // 前へボタン
        if (this.currentPage > 1) {
            paginationHTML += `<button class="page-btn" data-page="${this.currentPage - 1}">← 前</button>`;
        }
        
        // ページ番号
        for (let i = 1; i <= totalPages; i++) {
            if (i === this.currentPage) {
                paginationHTML += `<button class="page-btn active" data-page="${i}">${i}</button>`;
            } else {
                paginationHTML += `<button class="page-btn" data-page="${i}">${i}</button>`;
            }
        }
        
        // 次へボタン
        if (this.currentPage < totalPages) {
            paginationHTML += `<button class="page-btn" data-page="${this.currentPage + 1}">次 →</button>`;
        }
        
        pagination.innerHTML = paginationHTML;
        
        // ページネーションボタンのスタイル設定
        this.addPaginationStyles();
        
        // クリックイベント
        pagination.querySelectorAll('.page-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const page = parseInt(e.target.dataset.page);
                this.currentPage = page;
                this.renderArticles();
                this.renderPagination();
            });
        });
    }

    addPaginationStyles() {
        if (!document.getElementById('pagination-style')) {
            const style = document.createElement('style');
            style.id = 'pagination-style';
            style.textContent = `
                .page-btn {
                    padding: 8px 12px;
                    margin: 0 2px;
                    border: 1px solid var(--color-border);
                    background-color: var(--color-background2);
                    color: var(--color-text);
                    cursor: pointer;
                    border-radius: 4px;
                    font-family: semi;
                    transition: all 0.2s;
                }
                .page-btn:hover {
                    background-color: var(--color-tabhover);
                    color: white;
                }
                .page-btn.active {
                    background-color: var(--color-primary);
                    color: white;
                }
            `;
            document.head.appendChild(style);
        }
    }
}

// グローバル変数として設定（clearTags関数をHTMLから呼び出すため）
let blogManager;

// ページ読み込み後に初期化
document.addEventListener('DOMContentLoaded', () => {
    new BlogManager();
    new TabManager();
    new FontSizeController();
});










</script>

</body>
</html>
